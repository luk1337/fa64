#!/bin/sh
### FDE.AI v4 | FeraVolt. 2019 ###
. /fde.ai/s/libfde.so;
stop mpdecision;if [ -e /sys/module/msm_thermal/core_control/enabled ];then $B echo "0">/sys/module/msm_thermal/core_control/enabled;$B echo "N">/sys/module/msm_thermal/parameters/enabled;fi;if [ -e /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor ];then for nn in /sys/devices/system/cpu/cpu*/cpufreq/*;do $B echo "10000">"${nn}"/sampling_rate;$B echo "2">"${nn}"/sampling_down_factor;$B echo "2">"${nn}"/sample_rate_jiffies;$B echo "10000">"${nn}"/up_rate_us;$B echo "10000">"${nn}"/down_rate_us;$B echo "180000">"${nn}"/timer_slack;$B echo "0">"${nn}"/boost;$B echo "0">"${nn}"/sync_freq;$B echo "0">"${nn}"/enforced_mode;$B echo "0">"${nn}"/enable_prediction;$B echo "1">"${nn}"/use_migration_notif;done;elif [ -e /sys/devices/system/cpu/cpufreq/scaling_governor ];then for mm in /sys/devices/system/cpu/cpufreq/*;do $B echo "10000">"${mm}"/sampling_rate;$B echo "2">"${mm}"/sampling_down_factor;$B echo "2">"${mm}"/sample_rate_jiffies;$B echo "10000">"${mm}"/up_rate_us;$B echo "10000">"${mm}"/down_rate_us;$B echo "180000">"${mm}"/timer_slack;$B echo "0">"${mm}"/boost;$B echo "0">"${mm}"/sync_freq;$B echo "0">"${mm}"/enforced_mode;$B echo "0">"${mm}"/enable_prediction;$B echo "1">"${mm}"/use_migration_notif;done;fi;if [ -n "$RUS" ];then flog "- Оптимизирован регулятор ЦП";else flog "- CPU governor optimized";fi;if [ -e /sys/module/msm_thermal/core_control/enabled ];then $B echo "1">/sys/module/msm_thermal/core_control/enabled;fi;start mpdecision;if [ -e /sys/module/workqueue/parameters/power_efficient ];then setval "1" /sys/module/workqueue/parameters/power_efficient;setval "Y" /sys/module/workqueue/parameters/power_efficient;if [ -n "$RUS" ];then flog "- Активированы энергосберегающие очередности ЦП";else flog "- Power efficient CPU queues activated";fi;fi;for ggg in /dev/cpuctl/bg_* /dev/cpuctl/*/*;do $B echo "$((C*10+2))">"${ggg}"/cpu.shares;done;if [ -n "$RUS" ];then flog "- Оптимизация пропускной способности ЦП";else flog "- CPU bandwidth optimized";fi;if [ -e /sys/devices/system/cpu/cpu0/cpufreq/busfreq_static ];then $B chmod 644 /sys/devices/system/cpu/cpu0/cpufreq/busfreq_static;$B echo "disabled">/sys/devices/system/cpu/cpu0/cpufreq/busfreq_static;if [ -n "$RUS" ];then flog "- Активировано динамическое изменение частот шины ЦП";else flog "- CPU dynamic bus frequency scaling activated";fi;fi;if [ -e /sys/module/subsystem_restart/parameters/enable_ramdumps ];then setval "0" /sys/module/subsystem_restart/parameters/enable_ramdumps;if [ -n "$RUS" ];then flog "- Отключен дамп ОЗУ";else flog "- RAM dumps deactivated";fi;fi;if [ -d /dev/stune ];then $B echo "-12">/dev/stune/background/schedtune.boost;STN=$($B cat /dev/stune/top-app/schedtune.boost);$B echo "$((STN+1))">/dev/stune/top-app/schedtune.boost;if [ -n "$RUS" ];then flog "- Оптимизированы параметры Cgroups";else flog "- Cgroups parameters optimized";fi;fi;exit;
