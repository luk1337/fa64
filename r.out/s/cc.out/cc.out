#!/bin/sh
### FDE.AI v4 | FeraVolt. 2019 ###
. /fde.ai/s/libfde.so;
if [ -e /data/F ];then if [ "$S" -le "21" ];then dumpsys batterystats --reset;if [ -n "$RUS" ];then flog "- Разовый сборс статистики батареи";else flog "- Resetting battery stats once";fi;fi;if [ -n "$RUS" ];then flog "- Разовая оптимизация системных настроек";else flog "- Optimizing system settings once";fi;settings put global dropbox_max_files 1;settings put global hide_carrier_network_settings 0;settings put system anr_debugging_mechanism 0;settings put global tether_dun_required 0;dumpsys battery reset -f;if [ "$S" -lt "23" ];then if [ -n "$RUS" ];then flog "- Разовая оптимизация системных анимаций";else flog "- Optimizing system animations once";fi;if [ "$C" -le "4" ];then settings put global window_animation_scale 0.25;settings put global transition_animation_scale 0.25;settings put global animator_duration_scale 0.75;settings put system window_animation_scale 0.25;settings put system transition_animation_scale 0.25;settings put system animator_duration_scale 0.75;else settings put global window_animation_scale 0.50;settings put global transition_animation_scale 0.50;settings put global animator_duration_scale 1.0;settings put system window_animation_scale 0.50;settings put system transition_animation_scale 0.50;settings put system animator_duration_scale 1.0;fi;fi;if [ "$S" -ge "23" ];then pm disable --user 0 com.google.android.gms/.phenotype.service.sync.PhenotypeConfigurator;if [ -n "$RUS" ];then flog "- Отключение сброса настроек Doze";else flog "- Disabled Doze settings reset";fi;fi;$B rm -f /data/F;fi;settings put secure location_providers_allowed ' ';dumpsys deviceidle enable all;dumpsys deviceidle enabled all;if [ "$S" -ge "24" ];then settings delete global device_idle_constants;settings put global device_idle_constants inactive_to=60000,sensing_to=0,locating_to=0,location_accuracy=2000,motion_inactive_to=0,idle_after_inactive_to=0,idle_pending_to=60000,max_idle_pending_to=120000,idle_pending_factor=2.0,idle_to=900000,max_idle_to=21600000,idle_factor=2.0,max_temp_app_whitelist_duration=60000,mms_temp_app_whitelist_duration=30000,sms_temp_app_whitelist_duration=20000,light_after_inactive_to=10000,light_pre_idle_to=60000,light_idle_to=180000,light_idle_factor=2.0,light_max_idle_to=900000,light_idle_maintenance_min_budget=30000,light_idle_maintenance_max_budget=60000;if [ -n "$RUS" ];then flog "- Оптимизированы параметры Doze и Light Doze";else flog "- Doze and Light Doze parameters optimized";fi;elif [ "$S" -eq "23" ];then settings delete global device_idle_constants;settings put global device_idle_constants inactive_to=60000,sensing_to=0,locating_to=0,location_accuracy=2000,motion_inactive_to=0,idle_after_inactive_to=0,idle_pending_to=60000,max_idle_pending_to=120000,idle_pending_factor=2.0,idle_to=900000,max_idle_to=21600000,idle_factor=2.0,max_temp_app_whitelist_duration=60000,mms_temp_app_whitelist_duration=30000,sms_temp_app_whitelist_duration=20000;if [ -n "$RUS" ];then flog "- Оптимизированы параметры Doze";else flog "- Doze parameters optimized";fi;fi;exit;
