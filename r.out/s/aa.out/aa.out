#!/bin/sh
### FDE.AI v4 | FeraVolt. 2019 ###
. /fde.ai/s/libfde.so;
SOC=$(getprop ro.boot.bootdevice);IBD=$(dumpsys batterystats|$B grep "Capacity:"|$B cut -d ":" -f 2|$B sed 's/ //g'|$B cut -c 1);IV=$((IBD*20));if [ -e /sys/devices/soc/"$SOC"/clkgate_enable ];then $B echo "1">/sys/devices/soc/"$SOC"/clkgate_enable;if [ -n "$RUS" ];then flog "- Активировано переключение частот платы";else flog "- Board clock gate activated";fi;fi;if [ -e /sys/devices/soc/"$SOC"/clkscale_enable ];then $B echo "1">/sys/devices/soc/"$SOC"/clkscale_enable;if [ -n "$RUS" ];then flog "- Активировано увеличение частот платы";else flog "- Board clock scaling activated";fi;fi;if [ -e /sys/module/lpm_levels/parameters/sleep_disabled ];then $B echo "0">/sys/module/lpm_levels/parameters/sleep_disabled;$B echo "N">/sys/module/lpm_levels/parameters/sleep_disabled;if [ -n "$RUS" ];then flog "- Активирован режим сна для ЦП";else flog "- CPU sleep mode activated";fi;fi;if [ -e /sys/module/cpuidle/parameters/enable_mask ];then $B echo "3">/sys/module/cpuidle/parameters/enable_mask;if [ -n "$RUS" ];then flog "- Активирован энергосберегающий режим простоя для ЦП";else flog "- CPU power-saving idle mode activated";fi;fi;if [ -e /sys/module/msm_performance/parameters/touchboost ];then $B echo "0">/sys/module/msm_performance/parameters/touchboost;if [ -n "$RUS" ];then flog "- Отключено ускорение ЦП при касании";else flog "- MSM touch boost deactivated";fi;fi;if [ -e /sys/power/pnpmgr/touch_boost ];then $B echo "0">/sys/power/pnpmgr/touch_boost;if [ -n "$RUS" ];then flog "- Отключено ускорение при касании";else flog "- Touch boost deactivated";fi;fi;if [ -d /sys/module/cpu_input_boost ];then $B echo "0">/sys/kernel/cpu_input_boost/enabled;$B echo "0">/sys/kernel/cpu_input_boost/ib_duration_ms;$B echo "0">/sys/module/cpu_input_boost/input_boost_duration;$B echo "0">/sys/module/cpu_input_boost/parameters/input_boost_duration;if [ -n "$RUS" ];then flog "- Отключено ускорение ЦП при касании";else flog "- CPU touch boost deactivated";fi;fi;if [ -e /sys/module/cpu_input_boost/parameters/wake_boost_duration ];then $B echo "250">/sys/module/cpu_input_boost/parameters/wake_boost_duration;if [ -n "$RUS" ];then flog "- Активировано ускорение при включении экрана";else flog "- Device wakeup boost activated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/wakeup_boost ];then $B echo "1">/sys/module/cpu_boost/parameters/wakeup_boost;if [ -n "$RUS" ];then flog "- Активировано ускорение при включении экрана";else flog "- Device wakeup boost activated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/load_based_syncs ];then $B echo "0">/sys/module/cpu_boost/parameters/load_based_syncs;$B echo "N">/sys/module/cpu_boost/parameters/load_based_syncs;$B echo "0">/sys/module/cpu_boost/parameters/sync_threshold;$B echo "N">/sys/module/cpu_boost/parameters/sync_threshold;if [ -n "$RUS" ];then flog "- Оптимизация синхронизаций ЦП";else flog "- CPU synchronisations optimization";fi;fi;if [ -e /sys/module/cpu_boost/parameters/powerkey_input_boost_ms ];then $B echo "250">/sys/module/cpu_boost/parameters/powerkey_input_boost_ms;if [ -n "$RUS" ];then flog "- Активировано ускорение при нажатии кнопки питания";else flog "- Power-key input boost activated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/sched_boost_on_input ];then $B echo "0">/sys/module/cpu_boost/parameters/sched_boost_on_input;$B echo "N">/sys/module/cpu_boost/parameters/sched_boost_on_input;if [ -n "$RUS" ];then flog "- Отключено ускорение планировщиков при вводе";else flog "- Schedulers input boost deactivated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/sched_boost_on_powerkey_input ];then $B echo "1">/sys/module/cpu_boost/parameters/sched_boost_on_powerkey_input;$B echo "Y">/sys/module/cpu_boost/parameters/sched_boost_on_powerkey_input;if [ -n "$RUS" ];then flog "- Активировано ускорение планировщиков при нажатии кнопки питания";else flog "- Power-key shedulers input boost activated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/input_boost_ms ];then OIB=$($B cat /sys/module/cpu_boost/parameters/input_boost_ms);if [ "$OIB" -ge "450" ];then IV="$OIB";fi;$B echo "0">/sys/module/cpu_boost/parameters/boost_ms;$B echo "0">/sys/module/cpu_boost/parameters/cpu_boost;$B echo "0">/sys/module/cpu_boost/parameters/cpuboost_enable;$B echo "N">/sys/module/cpu_boost/parameters/cpuboost_enable;$B echo "1">/sys/module/cpu_boost/parameters/input_boost_enabled;$B echo "0">/sys/module/cpu_boost/parameters/input_boost_ms_s2;$B echo "150">/sys/module/cpu_boost/parameters/min_input_interval;setval "$IV" /sys/module/cpu_boost/parameters/input_boost_ms;if [ -n "$RUS" ];then flog "- Оптимизировано ускорение ввода";else flog "- Input boost optimized";fi;fi;if [ -e /sys/kernel/fp_boost/enabled ];then $B echo "1">/sys/kernel/fp_boost/enabled;if [ -n "$RUS" ];then flog "- Активировано ускорение сканера отпечатков";else flog "- Fingerprint boost activated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/hotplug_boost ];then $B echo "0">/sys/module/cpu_boost/parameters/hotplug_boost;$B echo "N">/sys/module/cpu_boost/parameters/hotplug_boost;if [ -n "$RUS" ];then flog "- Отключено ускорение ЦП при подключении ядра";else flog "- CPU core hotplug boost deactivated";fi;fi;if [ -e /sys/module/cpu_boost/parameters/dynamic_stune_boost ];then if [ "$CA" -ge "4150" ];then $B echo "8">/sys/module/cpu_boost/parameters/dynamic_stune_boost;else $B echo "5">/sys/module/cpu_boost/parameters/dynamic_stune_boost;fi;if [ -n "$RUS" ];then flog "- Оптимизировано динамическое ускорение EAS";else flog "- EAS dynamic boost optimized";fi;fi;if [ -e /sys/class/lcd/panel/power_reduce ];then $B echo "1">/sys/class/lcd/panel/power_reduce;if [ -n "$RUS" ];then flog "- Уменьшено энергопотребление дисплея";else flog "- Reduced LCD power consumption";fi;fi;if [ -e /sys/module/simple_gpu_algorithm/parameters/simple_gpu_activate ];then $B echo "1">/sys/module/simple_gpu_algorithm/parameters/simple_gpu_activate;$B echo "Y">/sys/module/simple_gpu_algorithm/parameters/simple_gpu_activate;if [ -n "$RUS" ];then flog "- Активирован режим Simple GPU";else flog "- Simple GPU mode activated";fi;fi;if [ -e /sys/devices/system/cpu/sched_mc_power_savings ];then $B echo "0">/sys/devices/system/cpu/sched_mc_power_savings;if [ -n "$RUS" ];then flog "- Оптимизация многоядерного ЦП";else flog "- Multi-core CPU optimization";fi;fi;if [ -e /sys/module/wakeup/parameters/enable_msm_hsic_ws ];then $B echo "0">/sys/module/wakeup/parameters/enable_msm_hsic_ws;$B echo "N">/sys/module/wakeup/parameters/enable_msm_hsic_ws;fi;if [ -e /sys/module/wakeup/parameters/enable_si_ws ];then $B echo "0">/sys/module/wakeup/parameters/enable_si_ws;$B echo "N">/sys/module/wakeup/parameters/enable_si_ws;fi;if [ -d /sys/module/wakeup/parameters ];then $B echo "0">/sys/module/wakeup/parameters/enable_ipa_ws;$B echo "N">/sys/module/wakeup/parameters/enable_ipa_ws;$B echo "0">/sys/module/wakeup/parameters/enable_qcom_rx_wakelock_ws;$B echo "N">/sys/module/wakeup/parameters/enable_qcom_rx_wakelock_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_extscan_wl_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_extscan_wl_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_rx_wake_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_rx_wake_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_wake_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_wake_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_wow_wl_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_wow_wl_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_ctrl_wake_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_ctrl_wake_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_ipa_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_ipa_ws;$B echo "0">/sys/module/wakeup/parameters/enable_si_wsk;$B echo "N">/sys/module/wakeup/parameters/enable_si_wsk;$B echo "0">/sys/module/wakeup/parameters/enable_wlan_pno_wl_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wlan_pno_wl_ws;$B echo "0">/sys/module/wakeup/parameters/enable_wcnss_filter_lock_ws;$B echo "N">/sys/module/wakeup/parameters/enable_wcnss_filter_lock_ws;$B echo "0">/sys/module/wakeup/parameters/enable_smb135x_wake_ws;$B echo "N">/sys/module/wakeup/parameters/enable_smb135x_wake_ws;if [ -n "$RUS" ];then flog "- Оптимизированы вейклоки ядра";else flog "- Kernel wakelocks optimized";fi;fi;if [ -e /sys/module/hid_magicmouse/parameters/scroll_speed ];then $B echo "72">/sys/module/hid_magicmouse/parameters/scroll_speed;fi;if [ -e /sys/devices/virtual/sec/sec_touchscreen/tsp_threshold ];then $B echo "50">/sys/devices/virtual/sec/sec_touchscreen/tsp_threshold;if [ -n "$RUS" ];then flog "- Оптимизирована чувствительность сенсора экрана";else flog "- Touch-screen sensivity optimized";fi;fi;if [ -e /sys/class/touch/switch/set_touchscreen ];then $B echo "14005">/sys/class/touch/switch/set_touchscreen;if [ -n "$RUS" ];then flog "- Оптимизирована чувствительность сенсора экрана";else flog "- Touch-screen sensivity optimized";fi;fi;if [ -d /sys/devices/platform/galcore/gpu/gpu0/gpufreq ];then $B echo "conservative">/sys/devices/platform/galcore/gpu/gpu0/gpufreq/scaling_governor;setval "5" /sys/devices/platform/galcore/gpu/gpu0/gpufreq/conservative/freq_step;setval "20" /sys/devices/platform/galcore/gpu/gpu0/gpufreq/conservative/down_threshold;setval "45" /sys/devices/platform/galcore/gpu/gpu0/gpufreq/conservative/up_threshold;setval "9" /sys/devices/platform/galcore/gpu/gpu0/gpufreq/conservative/sampling_down_factor;VPUM=$($B cat /sys/class/devfreq/devfreq-vpu/max_freq);setval "$VPUM" /sys/class/devfreq/devfreq-vpu/userspace/set_freq;if [ -n "$RUS" ];then flog "- Оптимизация частот видео-ускорителя Vivante";else flog "- Vivante GPU frequencies optimization";fi;fi;if [ -e /sys/devices/platform/kgsl/msm_kgsl/kgsl-3d0/io_fraction ];then $B echo "50">/sys/devices/platform/kgsl/msm_kgsl/kgsl-3d0/io_fraction;if [ -n "$RUS" ];then flog "- Оптимизация I/O ускорителя Adreno";else flog "- Adreno GPU I/O optimization";fi;fi;if [ -e /sys/class/kgsl/kgsl-3d0/max_pwrlevel ];then setval "0" /sys/class/kgsl/kgsl-3d0/max_pwrlevel;$B echo "64">/sys/class/kgsl/kgsl-3d0/idle_timer;if [ -e /sys/class/kgsl/kgsl-3d0/default_pwrlevel ];then MFRE=$($B cat /sys/class/kgsl/kgsl-3d0/devfreq/min_freq);LEV=$($B cat /sys/class/kgsl/kgsl-3d0/min_pwrlevel);if [ "$MFRE" -ge "160000000" ];then $B echo "$LEV">/sys/class/kgsl/kgsl-3d0/default_pwrlevel;else $B echo "$((LEV-1))">/sys/class/kgsl/kgsl-3d0/default_pwrlevel;fi;fi;if [ -n "$RUS" ];then flog "- Оптимизация частот видео-ускорителя Adreno";else flog "- Adreno GPU frequencies optimization";fi;fi;if [ -e /sys/module/adreno_idler/parameters/adreno_idler_active ];then $B echo "1">/sys/module/adreno_idler/parameters/adreno_idler_active;$B echo "Y">/sys/module/adreno_idler/parameters/adreno_idler_active;$B echo "5000">/sys/module/adreno_idler/parameters/adreno_idler_idleworkload;$B echo "15">/sys/module/adreno_idler/parameters/adreno_idler_downdifferential;$B echo "27">/sys/module/adreno_idler/parameters/adreno_idler_idlewait;if [ -n "$RUS" ];then flog "- Активирован и оптимизирован Adreno idler";else flog "- Adreno Idler activated & optimized";fi;fi;if [ -e /sys/module/mali/parameters/mali_gpu_utilization_timeout ];then setval "250" /sys/module/mali/parameters/mali_gpu_utilization_timeout;if [ -n "$RUS" ];then flog "- Оптимизация ускорителя Mali";else flog "- Mali GPU optimization";fi;fi;if [ -e /sys/module/mali/parameters/mali_debug_level ];then $B echo "0">/sys/module/mali/parameters/mali_debug_level;if [ -n "$RUS" ];then flog "- Отключена отладка ускорителя Mali";else flog "- Mali GPU debugging dectivated";fi;fi;if [ -d /proc/mali/ ];then $B echo "1">/proc/mali/dvfs_enable;if [ -n "$RUS" ];then flog "- Активация DVFS для ускорителя Mali";else flog "- Mali GPU DVFS activated";fi;fi;if [ -e /proc/gpufreq/gpufreq_limited_thermal_ignore ];then $B echo "1">/proc/gpufreq/gpufreq_limited_thermal_ignore;if [ -n "$RUS" ];then flog "- Отключение температурного ограничения частот ускорителя Mali";else flog "- Mali GPU thermal limit deactivated";fi;fi;if [ -e /sys/module/mali/parameters/mali_touch_boost_level ];then if [ "$CA" -le "3351" ];then setval "0" /sys/module/mali/parameters/mali_touch_boost_level;else setval "1" /sys/module/mali/parameters/mali_touch_boost_level;fi;if [ -n "$RUS" ];then flog "- Оптимизировано ускорение ввода для ускорителя Mali";else flog "- Mali GPU touch boost activated";fi;elif [ -e /proc/gpufreq/gpufreq_input_boost ];then if [ "$CA" -le "3351" ];then $B echo "0">/proc/gpufreq/gpufreq_input_boost;else $B echo "1">/proc/gpufreq/gpufreq_input_boost;fi;if [ -n "$RUS" ];then flog "- Оптимизировано ускорение ввода для ускорителя Mali";else flog "- Mali GPU touch boost optimized";fi;fi;if [ -e /sys/kernel/debug/msm_fb/0/vsync_enable ];then $B echo "0">/sys/kernel/debug/msm_fb/0/vsync_enable;$B echo "16">/sys/kernel/debug/msm_fb/mdp/mdp_usec_diff_treshold;$B echo "40">/sys/kernel/debug/msm_fb/mdp/vs_rdcnt_slow;if [ -n "$RUS" ];then flog "- Оптимизация буфера кадров";else flog "- Frame buffer optimization";fi;fi;if [ -e /d/mdss_panel_fb0/intf0/min_refresh_rate ];then $B echo "54">/d/mdss_panel_fb0/intf0/min_refresh_rate;$B echo "54">/d/mdss_panel_fb0/intf1/min_refresh_rate;if [ -n "$RUS" ];then flog "- Оптимизация частоты кадров";else flog "- FPS optimization";fi;fi;if [ -e /sys/module/logger/parameters/log_mode ];then $B echo "2">/sys/module/logger/parameters/log_mode;if [ -n "$RUS" ];then flog "- Перенастройка записи логов";else flog "- Logger configuration";fi;fi;if [ -d /sys/devices/system/edac/cpu ];then $B echo "0">/sys/devices/system/edac/cpu/log_ce;$B echo "0">/sys/devices/system/edac/cpu/log_ue;if [ -n "$RUS" ];then flog "- Отключены ненужные логи ЦП";else flog "- Unneeded CPU logs deactivated";fi;fi;if [ -e /sys/module/sync/parameters/fsync ];then $B echo "0">/sys/module/sync/parameters/fsync;$B echo "N">/sys/module/sync/parameters/fsync;if [ -n "$RUS" ];then flog "- Отключена принудительная синхронизация файлов";else flog "- Forced file sync deactivated";fi;fi;if [ -e /sys/module/sync/parameters/fsync_enabled ];then $B echo "0">/sys/module/sync/parameters/fsync_enabled;$B echo "N">/sys/module/sync/parameters/fsync_enabled;if [ -n "$RUS" ];then flog "- Отключена принудительная синхронизация файлов";else flog "- Forced file sync deactivated";fi;fi;if [ -e /sys/kernel/dyn_fsync/Dyn_fsync_active ];then $B echo "1">/sys/kernel/dyn_fsync/Dyn_fsync_active;if [ -n "$RUS" ];then flog "- Активирована динамическая синхронизация файлов";else flog "- Dynamic file sync activated";fi;fi;if [ -e /sys/module/cryptomgr/parameters/notests ];then $B echo "Y">/sys/module/cryptomgr/parameters/notests;if [ -n "$RUS" ];then flog "- Отключены принудительные тесты криптографии";else flog "- Forced cryptography tests deactivated";fi;fi;for dsi in /sys/kernel/debug/dsi*;do $B echo "Y">"${dsi}"/dsi-phy-0_allow_phy_power_off;$B echo "Y">"$dsi}"/ulps_enable;done;for n in /sys/module/*;do $B echo "0">"${n}"/parameters/debug;$B echo "0">"${n}"/parameters/debug_mask;$B echo "0">"${n}"/parameters/log_ecn_error;$B echo "0">"${n}"/parameters/enable_event_log;$B echo "1">"${n}"/parameters/pm_qos_enable;done;$B echo "0">/proc/sys/debug/exception-trace;$B echo "0">/proc/sys/kernel/compat-log;$B echo "0">/d/tracing/tracing_on;$B echo "0">/sys/module/edac_core/parameters/edac_mc_log_ce;$B echo "0">/sys/module/edac_core/parameters/edac_mc_log_ue;$B echo "0">/sys/module/rmnet_data/parameters/rmnet_data_log_level;if [ -e /sys/kernel/debug/kgsl/kgsl-3d0/log_level_cmd ];then $B echo "0">/sys/kernel/debug/kgsl/kgsl-3d0/log_level_cmd;$B echo "0">/sys/kernel/debug/kgsl/kgsl-3d0/log_level_ctxt;$B echo "0">/sys/kernel/debug/kgsl/kgsl-3d0/log_level_drv;$B echo "0">/sys/kernel/debug/kgsl/kgsl-3d0/log_level_mem;$B echo "0">/sys/kernel/debug/kgsl/kgsl-3d0/log_level_pwr;fi;if [ -n "$RUS" ];then flog "- Отключена разная отладка ядра";else flog "- Disabled various kernel debugging";fi;exit;
